<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MPX core: getandsettime.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MPX core
   &#160;<span id="projectnumber">1</span>
   </div>
   <div id="projectbrief">A simple OS-simulating program that can handle low level operations.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">getandsettime.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;../mpx_supt.h&quot;</code><br />
<code>#include &quot;<a class="el" href="getandsettime_8h_source.html">getandsettime.h</a>&quot;</code><br />
<code>#include &lt;core/io.h&gt;</code><br />
<code>#include &lt;core/serial.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for getandsettime.c:</div>
<div class="dyncontent">
<div class="center"><img src="getandsettime_8c__incl.png" border="0" usemap="#getandsettime_8c" alt=""/></div>
<map name="getandsettime_8c" id="getandsettime_8c">
<area shape="rect" title=" " alt="" coords="205,5,333,32"/>
<area shape="rect" title=" " alt="" coords="5,80,116,107"/>
<area shape="rect" href="getandsettime_8h.html" title=" " alt="" coords="140,80,269,107"/>
<area shape="rect" title=" " alt="" coords="293,80,372,107"/>
<area shape="rect" title=" " alt="" coords="396,80,499,107"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aa7248b589fc560ae9af570ea480a6df6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="getandsettime_8c.html#aa7248b589fc560ae9af570ea480a6df6">Sec</a>&#160;&#160;&#160;0x00</td></tr>
<tr class="memdesc:aa7248b589fc560ae9af570ea480a6df6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The RTC register corresponding to seconds.  <a href="getandsettime_8c.html#aa7248b589fc560ae9af570ea480a6df6">More...</a><br /></td></tr>
<tr class="separator:aa7248b589fc560ae9af570ea480a6df6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86d632fa0bef69c8cc19f84f1683de9e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="getandsettime_8c.html#a86d632fa0bef69c8cc19f84f1683de9e">Min</a>&#160;&#160;&#160;0x02</td></tr>
<tr class="memdesc:a86d632fa0bef69c8cc19f84f1683de9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The RTC register corresponding to minutes.  <a href="getandsettime_8c.html#a86d632fa0bef69c8cc19f84f1683de9e">More...</a><br /></td></tr>
<tr class="separator:a86d632fa0bef69c8cc19f84f1683de9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5fd50443510f2fdfc14f2596c7c8b7e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="getandsettime_8c.html#af5fd50443510f2fdfc14f2596c7c8b7e">Hr</a>&#160;&#160;&#160;0x04</td></tr>
<tr class="memdesc:af5fd50443510f2fdfc14f2596c7c8b7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The RTC register corresponding to hours.  <a href="getandsettime_8c.html#af5fd50443510f2fdfc14f2596c7c8b7e">More...</a><br /></td></tr>
<tr class="separator:af5fd50443510f2fdfc14f2596c7c8b7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4f821eef55a5f74434d73fbb9757150e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="getandsettime_8c.html#a4f821eef55a5f74434d73fbb9757150e">get_Time</a> (int *pointer)</td></tr>
<tr class="memdesc:a4f821eef55a5f74434d73fbb9757150e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Grabs the hours, minutes, and seconds values of the time it is invoked and fills a buffer with that information.  <a href="getandsettime_8c.html#a4f821eef55a5f74434d73fbb9757150e">More...</a><br /></td></tr>
<tr class="separator:a4f821eef55a5f74434d73fbb9757150e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3a30722d3d38f5970320b8c92a3ab1b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="getandsettime_8c.html#aa3a30722d3d38f5970320b8c92a3ab1b">set_Time</a> (int hour, int minutes, int seconds)</td></tr>
<tr class="memdesc:aa3a30722d3d38f5970320b8c92a3ab1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes the current time of the machine to the provided values.  <a href="getandsettime_8c.html#aa3a30722d3d38f5970320b8c92a3ab1b">More...</a><br /></td></tr>
<tr class="separator:aa3a30722d3d38f5970320b8c92a3ab1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="af5fd50443510f2fdfc14f2596c7c8b7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5fd50443510f2fdfc14f2596c7c8b7e">&#9670;&nbsp;</a></span>Hr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Hr&#160;&#160;&#160;0x04</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The RTC register corresponding to hours. </p>

</div>
</div>
<a id="a86d632fa0bef69c8cc19f84f1683de9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86d632fa0bef69c8cc19f84f1683de9e">&#9670;&nbsp;</a></span>Min</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Min&#160;&#160;&#160;0x02</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The RTC register corresponding to minutes. </p>

</div>
</div>
<a id="aa7248b589fc560ae9af570ea480a6df6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7248b589fc560ae9af570ea480a6df6">&#9670;&nbsp;</a></span>Sec</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Sec&#160;&#160;&#160;0x00</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The RTC register corresponding to seconds. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4f821eef55a5f74434d73fbb9757150e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f821eef55a5f74434d73fbb9757150e">&#9670;&nbsp;</a></span>get_Time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void get_Time </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>pointer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Grabs the hours, minutes, and seconds values of the time it is invoked and fills a buffer with that information. </p>
<p>Since the information in the RTC registers are stored in BCD form, they will need to be converted back to regular binary. Two copies of the hour value are stored in two int's, one to represent the "tens" location and the other for the "ones" location. With binary operations, the tens int will correctly represent the binary code for its number, and the same for the ones int. The process is repeated again for minutes and seconds after the two digits are stored in the buffer and the pointer is moved forward by two locations.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*ptr</td><td>A pointer to the buffer to be filled with time information </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa3a30722d3d38f5970320b8c92a3ab1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3a30722d3d38f5970320b8c92a3ab1b">&#9670;&nbsp;</a></span>set_Time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_Time </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>hour</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>minutes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>seconds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Changes the current time of the machine to the provided values. </p>
<p>To change the time, similarly to date, the interrupts are first disabled, then the given int values are converted to their respective BCD form. Once this is done, each int is then written to its corresponding register. Finally, the interrupts are enabled again.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hour</td><td>int value of the hour </td></tr>
    <tr><td class="paramname">minutes</td><td>int value of the minutes </td></tr>
    <tr><td class="paramname">seconds</td><td>int value of the seconds </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
